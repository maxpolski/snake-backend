(this.webpackJsonpsnake=this.webpackJsonpsnake||[]).push([[0],{23:function(e,t,n){},25:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(0),o=n.n(r),i=n(13),a=n.n(i),s=(n(23),n(2)),u=n(17),l=n(14),b=n(9),j=n(11),f=n.n(j),O=n(15),d=n(3),p=(n(25),400),h=400,g=[200,200];function v(e){return Math.floor(Math.random()*Math.floor(e))}function x(e){for(var t=[v(395),v(395)];!e(t);)t=[v(395),v(395)];return t}var m=function(){var e=Object(r.useRef)(null),t=Object(r.useRef)(null),n=Object(r.useRef)(null),o=Object(r.useState)(""),i=Object(d.a)(o,2),a=i[0],j=i[1],v=Object(r.useState)([]),m=Object(d.a)(v,2),w=m[0],y=m[1],k=Object(r.useState)(!1),C=Object(d.a)(k,2),S=C[0],R=C[1],A=Object(r.useState)(!1),E=Object(d.a)(A,2),D=E[0],I=E[1],M=Object(r.useState)(!1),F=Object(d.a)(M,2),T=F[0],L=F[1],N=Object(r.useState)([]),B=Object(d.a)(N,2),J=B[0],P=B[1],U=Object(r.useState)([]),Y=Object(d.a)(U,2),G=Y[0],H=Y[1],V=Object(r.useState)("left"),W=Object(d.a)(V,2),q=W[0],z=W[1],K=Object(r.useState)([0,0]),Q=Object(d.a)(K,2),X=Q[0],Z=Q[1],$=Object(r.useCallback)((function(){P([{position:g,direction:"left"}]),H([]),R(!1),Z(x((function(e){return e[0]%5===0&&(e[0]<g[0]||e[0]>g[0])&&e[1]%5===0&&(e[1]<g[1]||e[1]>g[1])})))}),[P,H,R]),_=Object(r.useCallback)(Object(O.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://snack-ts-ts.herokuapp.com","/records"));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,y(n),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)}))),[y]);Object(r.useEffect)((function(){$(),_()}),[]);var ee=Object(r.useCallback)((function(){if(e.current){var t=e.current.getContext("2d");if(!S){t.clearRect(0,0,t.canvas.width,t.canvas.height),t.fillStyle="black",t.fillRect.apply(t,Object(b.a)(X).concat([5,5]));for(var n=0;n<J.length;n++)t.fillStyle="grey",t.fillRect.apply(t,Object(b.a)(J[n].position).concat([5,5])),t.fillStyle="white",t.fillRect(J[n].position[0]+1,J[n].position[1]+1,3,3)}}}),[J,X,S]),te=Object(r.useCallback)((function(){_(),I(!0)}),[_]);Object(r.useEffect)((function(){S&&te()}),[S,te]);var ne=Object(r.useCallback)((function(){var e=Object(l.a)(J),t=e[0].position;return!!e.slice(1).find((function(e){return e.position[0]===t[0]&&e.position[1]===t[1]}))}),[J]),ce=Object(r.useCallback)((function(){if(ne())R(!0);else{var e,t=J[J.length-1],n=J.map((function(e,t){var n=e.position,c=Object(u.a)(e,["position"]);if(0===t)switch(q){case"left":var r=n[0]-5;return Object(s.a)(Object(s.a)({},c),{},{position:[r<0?395:r,n[1]]});case"right":var o=n[0]+5;return Object(s.a)(Object(s.a)({},c),{},{position:[o>=h?0:o,n[1]]});case"up":var i=n[1]-5;return Object(s.a)(Object(s.a)({},c),{},{position:[n[0],i<0?395:i]});case"down":var a=n[1]+5;return Object(s.a)(Object(s.a)({},c),{},{position:[n[0],a>=p?0:a]});default:return Object(s.a)(Object(s.a)({},c),{},{position:n})}return Object(s.a)(Object(s.a)({},c),{},{position:G[t-1]})}));if((e=J[0].position)[0]===X[0]&&e[1]===X[1]){var c=[].concat(Object(b.a)(n),[t]);P(c),Z(x((function(e){return e[0]%5===0&&e[1]%5===0&&!c.find((function(t){return t.position[0]===e[0]&&t.position[1]===e[1]}))})))}else P(n);H(J.map((function(e){return e.position}))),T&&L(!1)}}),[J,P,X,Z,G,H,q,ne,R,T,L]);Object(r.useEffect)((function(){if(!S)return t.current=setInterval((function(){ee()}),33.333333333333336),n.current=setInterval(ce,33.333333333333336),function(){clearTimeout(t.current),clearTimeout(n.current)}}),[ee,ce,S]),Object(r.useEffect)((function(){document.onkeydown=function(e){if(!T){var t=e.key;if("ArrowUp"===t||"ArrowDown"===t||"ArrowLeft"===t||"ArrowRight"===t)switch(e.preventDefault(),t){case"ArrowUp":"down"!==q&&"up"!==q&&z("up");break;case"ArrowDown":"down"!==q&&"up"!==q&&z("down");break;case"ArrowLeft":"left"!==q&&"right"!==q&&z("left");break;case"ArrowRight":"left"!==q&&"right"!==q&&z("right")}L(!0)}}}),[z,q,L,T]);var re=Object(r.useMemo)((function(){return w.sort((function(e,t){return t.record-e.record}))[0]||0}),[w]),oe=Object(r.useMemo)((function(){return J.length-1}),[J]),ie=Object(r.useCallback)((function(){a.length>3&&fetch("".concat("https://snack-ts-ts.herokuapp.com","/records"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,record:oe})}),I(!1)}),[oe,a]);return Object(c.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:["Score: ",oe,Object(c.jsxs)("div",{className:"App",style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexDirection:"column",border:"1px solid grey"},children:[Object(c.jsx)("div",{style:{width:h,height:p},children:Object(c.jsx)("canvas",{ref:e,height:p,width:h})}),S?Object(c.jsx)("div",{style:{position:"absolute",width:h,height:p,display:S?"flex":"none",backgroundColor:"rgba(0,0,0,0.4)",alignItems:"center",justifyContent:"center"},children:Object(c.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",backgroundColor:"white",padding:15},children:[Object(c.jsx)("span",{children:"GAME OVER"}),Object(c.jsx)("a",{onClick:$,role:"button",href:"#noop",style:{cursor:"pointer",color:"red"},children:"Restart"}),D?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("span",{children:["Your Result is ",oe," ",oe>re.record?"(NEW RECORD!)":""]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("label",{htmlFor:"username",children:"Your Name"}),Object(c.jsx)("br",{}),Object(c.jsx)("input",{id:"username",value:a,onChange:function(e){return j(e.target.value)}})]}),Object(c.jsx)("button",{onClick:ie,children:"Save"})]}):null,Object(c.jsxs)("div",{children:["Leader's Board:",Object(c.jsx)("ul",{style:{maxHeight:75,overflow:"scroll"},children:w.map((function(e){return Object(c.jsxs)("li",{children:[e.user,": ",e.record]},"".concat(e.user+e.record.toString()))}))})]})]})}):null]})]})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,29)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),o(e),i(e)}))},y=n(16);n.n(y).a.config(),a.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(m,{})}),document.getElementById("root")),w()}},[[28,1,2]]]);
//# sourceMappingURL=main.52b99a04.chunk.js.map